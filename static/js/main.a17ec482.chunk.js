(this.webpackJsonpkzgse=this.webpackJsonpkzgse||[]).push([[0],{30:function(e,t,a){},31:function(e,t,a){},63:function(e,t,a){e.exports=a(98)},68:function(e,t,a){},98:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(25),c=a.n(s),o=(a(68),a(30),a(31),a(3)),i=a(15),l=a.n(i),m=a(28),u=a(19),h=a(20),p=a(23),d=a(22),v=a(18),g=a.n(v),E=(a(86),function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).removeAfterPurchase=function(e){e.forEach((function(e){n.deleteItem(e.key)}))},n.purchaseItem=function(){var e=Object(m.a)(l.a.mark((function e(t){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==n.state.email){e.next=3;break}return alert("Please enter address"),e.abrupt("return");case 3:return console.log("buyItems: ",t[0]),a={},t.forEach(function(){var e=Object(m.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t.price),a[t.name.replace("\n","")]=[t.price.replace("\n","").replace("$",""),t.count];case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),console.log(a),r="","http://13.57.233.151/invoice/add-invoice",e.next=11,g.a.post("http://13.57.233.151/invoice/add-invoice",{email:"ramissir@ucsc.edu"}).then(function(){var e=Object(m.a)(l.a.mark((function e(t){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),!t.data.hasOwnProperty("_id")){e.next=12;break}return s="http://13.57.233.151/invoice/add-items",r=t.data._id,e.next=6,g.a.post(s,{invoiceID:t.data._id,items:a}).then((function(e){console.log("second time",e)}));case 6:return console.log("interim"),s="http://13.57.233.151/invoice/attach-address",e.next=10,g.a.post(s,{invoice:r,address:n.state.email}).then((function(e){console.log("third time",e)}));case 10:e.next=13;break;case 12:alert("something wrong");case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}));case 11:window.location.replace("pay.kahzap.com/"+r);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.setName=function(e){n.setState({name:e.target.value})},n.setPhoneNumber=function(e){n.setState({phoneNumber:e.target.value})},n.setEmail=function(e){n.setState({email:e.target.value})},n.onBuy=function(e){},n.deleteItem=function(e){var t=n.state.shoppingCart.filter((function(t){return t.key!==e}));n.setState((function(e){return{shoppingCart:t}})),localStorage.setItem("cart",JSON.stringify(t))},n.deleteStore=function(e){n.setState((function(t){return{shoppingCart:t.shoppingCart.filter((function(t){return t.store!==e}))}}))},n.state={name:"",phoneNumber:"",email:"",shoppingCart:[]},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=localStorage.hasOwnProperty("cart")?JSON.parse(localStorage.cart):[];console.log(e),this.setState({shoppingCart:e})}},{key:"aggregate",value:function(e){var t={};return e.forEach((function(e){var a=e.store;t[a]?t[a].push(e):t[a]=[e]})),t}},{key:"render",value:function(){var e=this;return this.state.buy?r.a.createElement(o.a,{to:{pathname:"/confirmation",state:{id:this.state.itemsToBuy}}}):r.a.createElement("div",null,r.a.createElement("div",{className:"hero is-primary"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"hero-body"},r.a.createElement("h1",{className:"title"},"Shopping Cart"),r.a.createElement("h2",{className:"subtitle"},'Enter information and click "purchase"')))),r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"notification is-offwhite"},"Address",r.a.createElement("div",{className:"field is-horizontal"},r.a.createElement("div",{className:"field-body"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",placeholder:"Delivery Address Here",onChange:this.setEmail}))))),r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column"},Object.keys(this.aggregate(this.state.shoppingCart)).map((function(t){var a=e.aggregate(e.state.shoppingCart)[t];return r.a.createElement("div",{className:"box",key:t},r.a.createElement("h2",{className:"is-size-2"},t)," ",a.map((function(t){return r.a.createElement("div",{className:"content",key:t.key},r.a.createElement("h3",null," ",r.a.createElement("button",{className:"delete is-medium",onClick:function(){return e.deleteItem(t.key)}})," ",t.name," "),r.a.createElement("h4",null,t.price," x",t.count),r.a.createElement("img",{src:t.url,alt:t.name,style:{height:"200px"}}))})),r.a.createElement("button",{className:"button is-link is-fullwidth is-medium",onClick:function(){return e.purchaseItem(a)}},"Purchase"))})))))))}}]),a}(r.a.Component)),b=a(24),f=a(40),y=a(113),N=a(60),k=a.n(N),C=a(59),S=a.n(C),w=a(29),O=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).setQuantity=function(e){n.setState({quantity:e.target.value})},n.state={store:"",itemID:"",name:"",imageURL:"",desc:"",price:null,count:0,quantity:1,color:"",loading:!0,size:"",slidenum:3,slidelist:[],otherInfo:[],redirect:!1},n.addCart=n.addCart.bind(Object(b.a)(n)),n.redirectToCart=n.redirectToCart.bind(Object(b.a)(n)),n.handleChangeColor=n.handleChangeColor.bind(Object(b.a)(n)),n.handleChangeSize=n.handleChangeSize.bind(Object(b.a)(n)),n}return Object(h.a)(a,[{key:"checkCart",value:function(){var e=this.props.match.params.store;localStorage.hasOwnProperty("cart")&&(JSON.parse(localStorage.cart)[0].store!==e&&localStorage.removeItem("cart"))}},{key:"getData",value:function(){var e=Object(m.a)(l.a.mark((function e(){var t,a=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({store:this.props.match.params.store,itemID:this.props.match.params.itemID});case 2:t="https://raw.githubusercontent.com/thebigbadbobby/productpics/main/"+this.props.match.params.store+"/"+this.props.match.params.itemID+"/name",g.a.get(t).then((function(e){console.log(e),200==e.status?(t="https://raw.githubusercontent.com/thebigbadbobby/productpics/main/"+a.props.match.params.store+"/"+a.props.match.params.itemID+"/name",g.a.get(t).then((function(e){a.setState({name:e.data})})),t="https://raw.githubusercontent.com/thebigbadbobby/productpics/main/"+a.props.match.params.store+"/"+a.props.match.params.itemID+"/price",g.a.get(t).then((function(e){a.setState({price:e.data})})),t="https://raw.githubusercontent.com/thebigbadbobby/productpics/main/"+a.props.match.params.store+"/"+a.props.match.params.itemID+"/desc",g.a.get(t).then((function(e){a.setState({desc:e.data})})),t="https://raw.githubusercontent.com/thebigbadbobby/productpics/main/"+a.props.match.params.store+"/"+a.props.match.params.itemID+"/1.png",a.setState({imageURL:t})):(alert("uh oh this url is bad whoops, redirecting you to the cart!"),a.props.history.push("/404/"))})).catch((function(e){console.log(e),alert("This product doesn't exist! Click ok to go back to cart."),window.location.replace("http://localhost:8081/cart")}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){console.log(this.props.match.params.store),console.log(this.props.match.params.itemID),this.getData()}},{key:"handleChangeColor",value:function(e){var t=e.currentTarget.value;this.setState({color:t})}},{key:"handleChangeSize",value:function(e){this.setState({size:e.currentTarget.value})}},{key:"redirectToCart",value:function(e){e.preventDefault(),console.log(this.props),this.props.history.push("/cart/")}},{key:"addCart",value:function(e){var t=this;e.preventDefault();var a=!0;if(this.state.otherInfo.map((function(e){var n=Object.keys(e);return"Colors"===n[0]?""===t.state.color&&(alert("Select color please"),a=!1):"Size"===n[0]&&""===t.state.size&&(alert("Select Size please"),a=!1),null})),a){if(localStorage.hasOwnProperty("cart")){console.log("cart detected");var n=JSON.parse(localStorage.cart);console.log("oldData ",n);var r=[];Array.isArray(n)?r=n:(console.log("no array reee"),r.push(n)),console.log("data here is ",r);var s={count:this.state.quantity,url:this.state.imageURL,price:this.state.price,name:this.state.name,store:this.state.store,key:Object(f.uuid)()};""!==this.state.color&&(s.color=this.state.color),""!==this.state.size&&(s.size=this.state.size),r.push(s),localStorage.setItem("cart",JSON.stringify(r))}else{console.log("cart not detected adding cart");var c={count:this.state.quantity,url:this.state.imageURL,price:this.state.price,name:this.state.name,store:this.state.store,key:Object(f.uuid)()};""!==this.state.color&&(c.color=this.state.color),""!==this.state.size&&(c.size=this.state.size);var o=[];o.push(c),localStorage.setItem("cart",JSON.stringify(o))}this.props.history.push("/cart/")}}},{key:"render",value:function(){var e=this;return this.state.redirect?r.a.createElement(o.a,{to:{pathname:"/cart/"}}):r.a.createElement("div",null,r.a.createElement("div",{className:"hero is-primary"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"hero-body"},r.a.createElement("h1",{className:"title is-left"},"ShopLink")))),r.a.createElement("div",{className:"columns",style:{paddingBottom:"100px"}},r.a.createElement("div",{className:"column is-4 "},r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"notification"},r.a.createElement("br",null),r.a.createElement("h1",{className:"is-size-1"},this.state.store),r.a.createElement("h2",{className:"is-size-3"},this.state.name),r.a.createElement("p",{className:"is-size-4"}," ",this.state.price),r.a.createElement("p",{className:"is-size-5"}," ",this.state.desc),r.a.createElement("br",null),"Quantity",r.a.createElement("div",{className:"field-body"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",placeholder:"ex. 2",onChange:this.setQuantity}))),r.a.createElement(y.a,{variant:"contained",color:"warning",className:"button is-primary is-large is-warning mt-6",onClick:this.addCart},"Add To Cart"),r.a.createElement("span",{style:{margin:"5px"}}),r.a.createElement(y.a,{variant:"contained",color:"warning",className:"button is-large is-info mt-6",onClick:this.redirectToCart,style:{marginTop:"10px"}},r.a.createElement(w.c,{size:60}))),this.state.otherInfo?this.state.otherInfo.map((function(t){var a=Object.keys(t);return"Colors"===a[0]?r.a.createElement("div",{key:a},r.a.createElement("p",null,a),r.a.createElement("div",{className:"select"},r.a.createElement("select",{onChange:e.handleChangeColor,value:e.state.color},r.a.createElement("option",{value:"",key:""}),t[a].map((function(e){return r.a.createElement("option",{value:e,key:e},e)}))))):"Size"===a[0]?r.a.createElement("div",{key:a},r.a.createElement("p",null,a),r.a.createElement("div",{className:"select"},r.a.createElement("select",{onChange:e.handleChangeSize,value:e.state.size},"   ",r.a.createElement("option",{value:"",key:""}),t[a].map((function(e){return r.a.createElement("option",{value:e,key:e},e)}))))):null})):null)),this.state.slidenum<10&this.state.slidenum>0&this.state.loading?r.a.createElement("div",{className:"column is-two-thirds"},r.a.createElement("figure",null,r.a.createElement("img",{src:"https://raw.githubusercontent.com/thebigbadbobby/productpics/main/".concat(this.props.match.params.store,"/").concat(this.props.match.params.itemID,"/").concat(this.state.count+1,".png"),alt:this.state.name,onError:function(){e.setState({loading:!1})}})),r.a.createElement(y.a,{variant:"contained",color:"primary",onClick:function(){e.setState({count:(e.state.count-1+e.state.slidenum)%e.state.slidenum})},startIcon:r.a.createElement(S.a,null)}),r.a.createElement(y.a,{variant:"contained",color:"primary",onClick:function(){e.setState({count:(e.state.count+1)%e.state.slidenum})},startIcon:r.a.createElement(k.a,null)}),r.a.createElement("div",{className:"is-right"})):r.a.createElement("div",{className:"column is-3"},r.a.createElement("figure",null,r.a.createElement("img",{src:this.state.imageURL,alt:this.state.name})))))}}]),a}(r.a.Component),x=a(14),z=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"hero is-primary"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"hero-body"},r.a.createElement("h1",{className:"title"},"QR Kahzum"),r.a.createElement("h2",{className:"subtitle"},"Error 404 - Looks like you're lost!")))),r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{className:"button is-success"},r.a.createElement(x.b,{to:"/cart/",style:{textDecoration:"none"}}," View Cart")),r.a.createElement("button",{className:"button is-link is-light",onClick:function(){alert("Coming soon!")}},"Store login")))))}}]),a}(r.a.Component),j=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"hero is-primary"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"hero-body"},r.a.createElement("h1",{className:"title"},"ShopLink"),r.a.createElement("h2",{className:"subtitle"},"A new shopping experience for the present and future")))),r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"box level-item has-text-centered"},r.a.createElement(w.d,{size:70}),r.a.createElement("h1",null,"Our app allows you to transform your store into a showroom experience"))),r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"box level-item has-text-centered"},r.a.createElement(w.b,{size:70}),r.a.createElement("h1",null,"QR codes allow us to present more detail and allow to save or checkout from cart"))),r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"box level-item has-text-centered"},r.a.createElement(w.a,{size:70}),r.a.createElement("h1",null,"Every purchase made notifies both customer and business to make sure orders get ready as soon as possible")))))),r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{className:"button is-success"},r.a.createElement(x.b,{to:"/cart/",style:{textDecoration:"none"}}," View Cart"))))))}}]),a}(r.a.Component);var I=function(){return r.a.createElement(x.a,null,r.a.createElement(o.d,null,r.a.createElement(o.b,{path:"/",exact:!0,component:j}),r.a.createElement(o.b,{path:"/cart",component:E}),r.a.createElement(o.b,{path:"/item/:store/:itemID",component:O}),r.a.createElement(o.b,{path:"/404",component:z}),r.a.createElement(o.b,{component:z})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[63,1,2]]]);
//# sourceMappingURL=main.a17ec482.chunk.js.map